#!/usr/bin/env python3

import argparse
import os
from src.cooperace import Cooperace
from benchexec.tools.dartagnan import Tool as Dartagnan
from benchexec.tools.goblint import Tool as Goblint
from benchexec.tools.deagle import Tool as Deagle

parser = argparse.ArgumentParser()

parser.add_argument('--arch', required=False)
parser.add_argument('--prop', required=False)
parser.add_argument('--version', action='version', version='CoOpeRace 0.1')
parser.add_argument('filepath')

args = parser.parse_args()

abs_path = os.path.abspath(args.filepath) # to run outside benchexec
cooperace = Cooperace(abs_path, args.prop, args.arch)

def main():
    verdict = cooperace.runParallel([Goblint(), Deagle(), Dartagnan()])
    print("CoOpeRace verdict: " + verdict)

main()